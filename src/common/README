chared code of client and server 
